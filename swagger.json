{
    "openapi": "3.0.1",
    "info": {
      "version": "1.0.0",
      "title": "Wallet API docs",
      "description": "API documentation for Team project 'Wallet'. [Backend github repository](https://github.com/VladVinichenko/Wallet_API) ",
      "license": {
        "name": "MIT",
        "url": "https://opensource.org/licenses/MIT"
          }
      },
      "consumes": ["application/json"],
      "produces": ["application/json"],
      "servers": [
          { "url": "https://wallet-api-goit.herokuapp.com" }
          ],
      "tags": [
      {
        "name": "Users management",
        "description": "endpoints"
      },
      {
        "name": "Transactions management",
        "description": "endpoints"
      }
      ],
      "paths": {
      "/api/auth/signup": {
        "post": {
          "tags": ["Users management"],
          "summary": "User registration",
          "parameters": [],
          "requestBody": {
          "description": "Registration's object",
          "required": true,
          "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistrationRequest"
                  }
              }
          }
          },
          "responses": {
            "201": {
              "description": "Successful operation",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/RegistrationResponse"
                  }
                }
              }
            },
            "400": {
              "description": "Bad request (invalid request body)",
              "content": {}
            },
            "409": {
              "description": "User with provided email already exists",
              "content": {}
            }
          }
        }
      },
      "/api/auth/verify/:verificationToken": {
        "post": {
          "tags": ["Users management"],
          "summary": "User verification",
          "parameters": [
            {
              "name": "verificationToken",
              "in": "path",
              "description": "Verification Token",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful operation",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/VerificationResponse"
                  }
                }
              }
            },
            "400": {
              "description": "Bad request",
              "content": {}
            },
            "404": {
              "description": "Not found",
              "content": {}
            }
          }
        }
      },
      "/api/auth/signin": {
        "post": {
          "tags": ["Users management"],
          "summary": "User authentication",
          "parameters": [],
          "requestBody": {
            "description": "Authentication's object",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SigninRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful operation",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/SigninResponse"
                  }
                }
              }
            },
            "400": {
              "description": "Bad request (invalid request body)",
              "content": {}
            },
            "401": {
              "description": "Email not found / Email not verified / Password is wrong",
              "content": {}
            }
          }
        }
      },
      "/api/auth/signout": {
        "get": {
          "tags": ["Users management"],
          "summary": "Signout",
          "security": [{ "Bearer": [] }],
          "parameters": [],
          "responses": {
            "204": {
              "description": "No content",
              "content": {}
            },
            "401": {
              "description": "Not authorized",
              "content": {}
            }
          }
        }
      },
      "/api/auth/refresh-tokens": {
        "post": {
          "tags": [
            "Users management"
          ],
          "summary": "Update user's refresh token",
          "security": [
            {
              "Bearer": []
            }
          ],
          "parameters": [],
          "requestBody": {
            "description": "Refresh token send in body",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshTokenRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful operation",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/RefreshTokenResponse"
                  }
                }
              }
            },
            "400": {
              "description": "No token provided",
              "content": {}
            },
            "401": {
              "description": "Invalid Signature",
              "content": {}
            }
          }
        }
      },
      "/api/users/current": {
        "get": {
          "tags": ["Users management"],
          "summary": "Getting the current user",
          "security": [{ "Bearer": [] }],
          "responses": {
            "200": {
              "description": "Successful operation",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/CurrentUserResponse"
                  }
                }
              }
            },
            "500": {
              "description": "Invalid signature",
              "content": {}
            }
          }
        }
      },
       "/api/finance": {
        "get": {
          "tags": [
            "Transactions management"
          ],
          "summary": "Get all information about user's transactions by date",
          "security": [
            {
              "Bearer": []
            }
          ],
          "responses": {
            "200": {
              "description": "Successful operation",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/AllTransactionsResponse"
                  }
                }
              }
            },
            "500": {
              "description": "invalid token",
              "content": {}
            }
          }
        }
      },
      "/api/finance/": {
        "post": {
          "tags": [
            "Transactions management"
          ],
          "summary": "Create a transaction",
          "security": [
            {
              "Bearer": []
            }
          ],
          "parameters": [],
          "requestBody": {
            "description": "Transaction's object",
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionCreateRequest"
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "Created",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/TransactionCreateResponse"
                  }
                }
              }
            },
            "400": {
              "description": "Bad request (invalid request body) / No token provided",
              "content": {}
            },
            "401": {
              "description": "Not authorized",
              "content": {}
            }
          }
        }
      }, "/api/finance/total-finance": {
        "get": {
          "tags": [
            "Transactions management"
          ],
          "summary": "Get balance information about user's ",
          "security": [
            {
              "Bearer": []
            }
          ],
          "parameters": [],
          "requestBody": {
            "description": "Transaction's object",
            "required": false,
            "content": {}
          },
          "responses": {
            "200": {
              "description": "Successful operation",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/TransactionsTotalResponse"
                  }
                }
              }
            },
            "401": {
              "description": "Unauthorized (invalid access token)",
              "content": {}
            }
          }
        }
      },
      "/api/finance/statistics?month=${month}&year=${year}": {
        "get": {
          "tags": [
            "Transactions management"
          ],
          "summary": "Get all information about user's transactions category",
          "security": [
            {
              "Bearer": []
            }
          ],
          "parameters": [
            {
              "name": "month",
              "in": "query",
              "description": "Required Month",
              "required": true,
              "type": "string"
            },
            {
              "name": "year",
              "in": "query",
              "description": "Required Year",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful operation",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/TransactionsStatisticsResponse"
                  }
                }
              }
            },
            "401": {
              "description": "Not authorized / Token expired",
              "content": {}
            }
          }
        }
      },
      "/api/finance/categories": {
        "get": {
          "tags": [
            "Transactions management"
          ],
          "summary": "Get all user's categories of transactions",
          "parameters": [],
          "responses": {
            "200": {
              "description": "Successful operation",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ListOfTransactionsCategoriesResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
      "components": {
      "schemas": {
        "RegistrationRequest": {
          "required": ["name", "email", "password"],
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "example": "Guest",
              "description": "User's name",
              "minLength": 3,
              "maxLength": 50
            },
            "email": {
              "type": "string",
              "description": "User's email",
              "format": "email",
              "minLength": 3,
              "maxLength": 50
            },
            "password": {
              "type": "string",
              "description": "User's password",
              "example": "qazwsxedc",
              "minLength": 6,
              "maxLength": 50
            }
          }
        },
        "RegistrationResponse": {
          "type": "object",
          "properties": {
            "email": {
              "type": "string",
              "description": "User's email",
              "format": "email"
            }
          }
        },
        "VerificationResponse": {
          "type": "object",
          "properties": {
            "message": {
              "type": "string",
              "description": "User's email",
              "example": "Your email verified"
            }
          }
        },
        "SigninRequest": {
          "required": ["email", "password"],
          "type": "object",
          "properties": {
            "email": {
              "type": "string",
              "description": "User's email",
              "format": "email",
              "minLength": 3,
              "maxLength": 50
            },
            "password": {
              "type": "string",
              "description": "User's password",
              "minLength": 6,
              "maxLength": 50,
              "example": "qazwsxedc"
            }
          }
        },
        "SigninResponse": {
          "type": "object",
          "properties": {
            "accessToken": {
              "type": "string",
              "description": "Session's access token (needed for all requests)",
              "example": "3Y2UyNzQiLCJzaWQiOiI1ZmMyZDJmY2UxZDIwNTA2NzAyYmRkMjIiLCJpYXQiOjE2MDY2MDM1MTYsImV4cCI6MTYwNjYwNzExNn0.rJ_QjU4KvA76H96RHsvOBChK0Vjbd0NmqjMxdQVJIXA"
            },
            "refreshToken": {
              "type":"string",
              "description": "Session's refresh token",
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImY2MWJjMDE3LWU4OGItNDVlZi04YmI4LWZlNjM1ZjY2Njk3ZiIsImlhdCI6MTY1MzIwOTA2MSwiZXhwIjoxNjUzMjEyNjYxf"
            },
            "name": {
              "type": "string",
              "example": "Guest",
              "description": "User's name",
              "minLength": 3,
              "maxLength": 50
            },
            "email": {
              "type": "string",
              "description": "User's email",
              "format": "email",
              "minLength": 3,
              "maxLength": 50
            }},
            "example": {
              "accessToken": "eyJ1aWQiOiI1ZmMyMDg1YmQwOTM2NTI4MTA3Y2UyNzQiLCJzaWQiOiI1ZmMyZDJmY2UxZDIwNTA2NzAyYmRkMjIiLCJpYXQiOjE2MDY2MDM1MTYsImV4cCI6MTYwNjYwNzExNn0.rJ_QjU4KvA76H96RHsvOBChK0Vjbd0NmqjMxdQVJIXA",
              "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImY2MWJjMDE3LWU4OGItNDVlZi04YmI4LWZlNjM1ZjY2Njk3ZiIsImlhdCI6MTY1MzIwOTA2MSwiZXhwIjoxNjUzMjEyNjYxfQ.qP0MAIoFu9VpaPFjWyg930LkSR4JRgW0NbZpEnWOc3A",
              "user": {
                "name": "Test Name",
                "email": "testemailrgr@gmail.com"
              }
            }},
            "RefreshTokenRequest": {
              "required": [
                "refreshToken"
              ],
              "type": "object",
              "properties": {
                "refreshToken": {
                  "type": "string",
                  "description": "User's refresh token",
                  "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImY2MWJjMDE3LWU4OGItNDVlZi04YmI4LWZlNjM1ZjY2Njk3ZiIsImlhdCI6MTY1MzIwOTA2MSwiZXhwIjoxNjUzMjEyNjYxfQ.qP0MAIoFu9VpaPFjWyg930LkSR4JRgW0NbZpEnWOc3A"
                }
              }
            },
            "RefreshTokenResponse": {
              "type": "object",
              "properties": {
                "accessToken": {
                  "type": "string",
                  "description": "Session's access token (needed for all requests)",
                  "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI1ZmMyMDg1YmQwOTM2NTI4MTA3Y2UyNzQiLCJzaWQiOiI1ZmMyZDJmY2UxZDIwNTA2NzAyYmRkMjIiLCJpYXQiOjE2MDY2MDM1MTYsImV4cCI6MTYwNjYwNzExNn0.rJ_QjU4KvA76H96RHsvOBChK0Vjbd0NmqjMxdQVJIXA"
                },
                "refreshToken": {
                  "type": "string",
                  "description": "Session's refresh token",
                  "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjgzNTY2ZWRhLTJhYzUtNDVlOC05MzE3LTRkYTExNmNjYmExOSIsImlhdCI6MTY1MzIwOTUxMywiZXhwIjoxNjUzMjEzMTEzfQ.pCe3nCSZlgx30P0xaeLyOR7i5aY7Q_TI05TL5Fr85Cg"
                }
              }
            },
            "CurrentUserResponse": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string",
                  "example": "Guest",
                  "description": "User's name",
                  "minLength": 3,
                  "maxLength": 50
                },
                "email": {
                  "type": "string",
                  "description": "User's email",
                  "format": "email",
                  "minLength": 3,
                  "maxLength": 50
                }},
                "example": {
                  "user": {
                    "name": "Test Name",
                    "email": "testemailrgr@gmail.com"
                  }
                }},
         "AllTransactionsRequest": {
          "optional": [
            "year",
            "month"
          ],
          "type": "object",
          "example": "SALARY",
          "properties": {
            "year": {
              "type": "string",
              "description": "Optional. Number of year when transactions were payed. If the year wasn't indicated in URL-request string, the default data for the current year returned",
              "example": "2021"
            },
            "month": {
              "type": "string",
              "description": "Optional. Number of month when transactions were payed. If the month wasn't indicated in URL-request string, the default data for the current month returned",
              "example": "2"
            }
          }
        },
        "AllTransactionsResponse": {
          "type": "object",
          "required": [
            "totalDocs",
            "offset",
            "limit",
            "totalPages",
            "page",
            "pagingCounter",
            "hasPrevPage",
            "hasNextPage",
            "prevPage",
            "nextPage"
          ],
          "properties": {
            "transaction": {
              "type": "object",
              "description": "Objects with all characteristics for paginate information about user's transactions and array of last one",
              "properties": {
                "total": {
                  "type": "integer",
                  "description": "How many transactions have user",
                  "example": 4
                },
                "limit": {
                  "type": "integer",
                  "description": "Maximum amount of transactions which could sent server in one request",
                  "example": 5
                },
                "page": {
                  "type": "integer",
                  "description": "Number of page which was sent from server",
                  "example": 1
                },
                "pages": {
                  "type": "integer",
                  "description": "Amount of total pages with all transactions",
                  "example": 1
                }
              }
            }
          },
          "example": {
            "transition": [
              {
                  "_id": "628356b897d487932b456332",
                  "date": "1970-01-24T18:09:07.654Z",
                  "type": "income",
                  "category": "628356e997d487932b45633c",
                  "comment": "January Bonus to Google corp. in USA",
                  "sum": "8000.00",
                  "balance": "14900.00",
                  "owner": "6281332dfd26d41c090754ce"
              },
              {
                  "_id": "6283575c97d487932b456347",
                  "date": "1970-01-22T10:35:47.654Z",
                  "type": "income",
                  "category": "628356e997d487932b45633b",
                  "comment": "January Bonus",
                  "sum": "8000.00",
                  "balance": "14900.00",
                  "owner": "6281332dfd26d41c090754ce"
              },
              {
                  "_id": "628356b897d487932b456338",
                  "date": "1970-01-20T13:35:47.654Z",
                  "type": "outlay",
                  "category": "628356e997d487932b45633e",
                  "comment": "Gift for wife",
                  "sum": "300.00",
                  "balance": "15500.00",
                  "owner": "6281332dfd26d41c090754ce"
              },
              {
                  "_id": "628356b897d487932b45632c",
                  "date": "1970-01-20T03:06:52.292Z",
                  "type": "income",
                  "category": "628356e997d487932b45633e",
                  "comment": "January Bonus",
                  "sum": "8000.00",
                  "owner": "6281332dfd26d41c090754ce",
                  "balance": "50000.00"
              },
              {
                  "_id": "628356b897d487932b456336",
                  "date": "1970-01-20T03:02:27.654Z",
                  "type": "income",
                  "category": "628356e997d487932b45633b",
                  "comment": "January Bonus",
                  "sum": "8000.00",
                  "balance": "14900.00",
                  "owner": "6281332dfd26d41c090754ce"
              },
              {
                  "_id": "628356b897d487932b456333",
                  "date": "1970-01-20T03:02:27.654Z",
                  "type": "income",
                  "category": "628356e997d487932b45633b",
                  "comment": "January Bonus",
                  "sum": "8000.00",
                  "balance": "14900.00",
                  "owner": "6281332dfd26d41c090754ce"
              },
              {
                  "_id": "628356b897d487932b456330",
                  "date": "1970-01-20T03:02:27.654Z",
                  "type": "income",
                  "category": "628356e997d487932b45633b",
                  "comment": "January Bonus",
                  "sum": "8000.00",
                  "balance": "14900.00",
                  "owner": "6281332dfd26d41c090754ce"
              },
              {
                  "_id": "6283575c97d487932b456348",
                  "date": "1970-01-20T03:02:27.654Z",
                  "type": "outlay",
                  "category": "628356e997d487932b45633b",
                  "comment": "January Bonus",
                  "sum": "8000.00",
                  "balance": "14900.00",
                  "owner": "6281332dfd26d41c090754ce"
              },
              {
                  "_id": "628356b897d487932b456335",
                  "date": "1970-01-20T03:02:27.654Z",
                  "type": "income",
                  "category": "628356e997d487932b45633b",
                  "comment": "January Bonus",
                  "sum": "8000.00",
                  "balance": "14900.00",
                  "owner": "6281332dfd26d41c090754ce"
              },
              {
                  "_id": "628356b897d487932b45632e",
                  "date": "1970-01-20T03:02:27.654Z",
                  "type": "income",
                  "category": "628356e997d487932b45633b",
                  "comment": "January Bonus",
                  "sum": "8000.00",
                  "balance": "14900.00",
                  "owner": "6281332dfd26d41c090754ce"
              }
          ],
          "total": 33,
          "limit": 10,
          "page": 1,
          "pages": 4
      }
        },
        "TransactionCreateRequest": {
          "type": "object",
          "required": [
            "date",
            "type",
            "category",
            "sum"
          ],
          "optional": [
            "comment"
          ],
          "properties": {
            "category": {
              "type": "string",
              "description": "Transaction's category",
              "example": "628356e997d487932b456343"
            },
            "comment": {
              "type": "string",
              "description": "Comment for transaction description",
              "example": "Comment"
            },
            "date": {
              "type": "string",
              "description": "Transaction's create date",
              "example": "Tue May 10 2022 22:57:18 GMT+0300 (Eastern European Summer Time)"
            },
            "sum": {
              "type": "string",
              "description": "Amount of transaction",
              "example": "850"
            },
            "type": {
              "type": "string",
              "description": "Transaction's type",
              "example": "outlay"
            }
          }
        },
        "TransactionCreateResponse": {
          "type": "object",
          "required": [
            "date",
            "type",
            "category",
            "comment",
            "sum",
            "owner",
            "balance",
            "id",
            "createdAt",
            "updatedAt"
          ],
          "properties": {
            "type": {
              "type": "string",
              "description": "Transaction's type",
              "example": "outlay"
            },
            "category": {
              "type": "string",
              "description": "Transaction's category",
              "example": "628356e997d487932b456343"
            },
            "sum": {
              "type": "number",
              "description": "Amount of transaction",
              "example": 850
            },
            "date": {
              "type": "string",
              "description": "Transaction's create date",
              "example": "2022-05-10T19:57:18.000Z"
            },
            "comment": {
              "type": "string",
              "description": "Comment for transaction description",
              "example": "Comment"
            },
            "owner": {
              "type": "string",
              "description": "User's id who creates this transaction",
              "example": "6288b87c56389bafbaa6ae9b"
            },
            "balance": {
              "type": "number",
              "description": "User's balance after add transaction",
              "example": 4867
            },
            "id": {
              "type": "string",
              "description": "Transaction's id",
              "example": "6289fe6e1da2cca94d7cfcda"
            },
            "createdAt": {
              "type": "string",
              "description": "Time when transaction was created on server",
              "example": "2022-05-22T09:12:14.973Z"
            },
            "updatedAt": {
              "type": "string",
              "description": "Time when transaction was updated on server",
              "example": "2022-05-22T09:12:14.973Z"
            }
          }
        }, 
        "TransactionsTotalResponse": {
          "type": "object",
          "required": [
            "categories"
          ],
          "properties": {
            "totalFinance": {
              "type": "object",
              "description": "Object of total user balance",
              "properties": {
                "_id": {
                  "type": "string",
                  "description": "User ID",
                  "example": "628356b897d487932b456332"
                },
                "balance": {
                  "type": "number",
                  "description": "User balance",
                  "example": 2000
                }
              }
            }
          },
          "example": {
            "totalFinance": {
              "_id": "628356b897d487932b456332",
              "balance": "14900.00"
            }
          }
        },
        "TransactionsStatisticsResponse": {
          "type": "object",
          "required": [
            "categories"
          ],
          "properties": {
            "transaction": {
              "type": "object",
              "description": "Object of all categories of user's transactions with total amount of each category and also information about totalIncome and totalExpense",
              "properties": {
                "category and amount": {
                  "type": "string and number",
                  "description": "Different Transaction's category with amount",
                  "example": "'Food': 50"
                },
                "incomeStatistics": {
                  "type": "number",
                  "description": "Amount of all user's total income",
                  "example": 1050
                },
                "totalOutlayStatistics": {
                  "type": "number",
                  "description": "Amount of all user's total expense",
                  "example": 550
                }
              }
            }
          },
          "example": {
            "incomeStatistics": 5.00,
            "totalOutlayStatistics": 4600.00,
            "statisticsByCategory": [
             { 
              "category": "628356e997d487932b45633d",
              "sum": 800 
             }
            ]
          }
        },
        "ListOfTransactionsCategoriesResponse": {
          "type": "object",
          "required": [
            "expenses",
            "incomes"
          ],
          "properties": {
            "expenses": {
              "type": "array",
              "description": "Array of all types of user's expense categories",
              "example": [
                "Basic",
                "Products",
                "Car",
                "Care about",
                "Child care",
                "Household products",
                "Education",
                "Leisure",
                "Other"
              ]
            },
            "incomes": {
              "type": "object",
              "description": "Array of all types of user's income categories",
              "example": [
                "Regular income",
                "Not regular income"
              ]
            }
          },
          "example": {
            "data": [
              {
                "_id": "628356e997d487932b45633b",
                "name": "Basic",
                "color": "#FED057"
              },
              {
                "_id": "628356e997d487932b45633c",
                "name": "Products",
                "color": "#FFD8D0"
              },
              {
                "_id": "628356e997d487932b45633d",
                "name": "Car",
                "color": "#FD9498"
              },
              {
                "_id": "628356e997d487932b45633e",
                "name": "Care about",
                "color": "#C5BAFF"
              },
              {
                "_id": "628356e997d487932b45633f",
                "name": "Child care",
                "color": "#6E78E8"
              },
              {
                "_id": "628356e997d487932b456340",
                "name": "Household products",
                "color": "#4A56E2"
              },
              {
                "_id": "628356e997d487932b456341",
                "name": "Education",
                "color": "#81E1FF"
              },
              {
                "_id": "628356e997d487932b456342",
                "name": "Leisure",
                "color": "#24CCA7"
              },
              {
                "_id": "628356e997d487932b456343",
                "name": "Other",
                "color": "#00AD84"
              },
              {
                "_id": "628587f997d487932b456397",
                "name": "Income",
                "color": "#FED057"
              }
            ]
            
          }
        }
          },
          "securitySchemes": {
        "Bearer": {
          "type": "http",
          "scheme": "bearer",
          "bearerFormat": "JWT"
        }
      }
      }
  }